import{s as K,e as I,a as S,b as T,d as A,g as j,f as Z,i as y,j as h,k as D,l as C,o as z,w as N,x as P,v as J,y as Q,z as G,A as X}from"./scheduler.-jOyszBT.js";import{e as B,u as Y,d as x}from"./each.OGh3blUO.js";import{S as $,i as ee}from"./index.j1-PsbEn.js";import{m as le}from"./Carousel.svelte_svelte_type_style_lang.t9g-goBU.js";function U(i,e,l){const a=i.slice();return a[21]=e[l],a[23]=l,a}function q(i,e,l){const a=i.slice();return a[21]=e[l],a[23]=l,a}function R(i){let e,l='<div class="flex items-center justify-center w-full h-full bg-gray-300 rounded dark:bg-gray-700"><svg class="w-10 h-10 text-gray-200 dark:text-gray-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18"><path d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"></path></svg></div>';return{c(){e=I("div"),e.innerHTML=l,this.h()},l(a){e=T(a,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),j(e)!=="svelte-19hrt40"&&(e.innerHTML=l),this.h()},h(){h(e,"role","status"),h(e,"class","image-placeholder svelte-gp961v")},m(a,t){D(a,e,t)},d(a){a&&y(e)}}}function F(i,e){let l,a,t,u,r,o,w,f,m,g=e[1][e[23]]&&R();function b(){return e[10](e[23])}function M(){return e[11](e[21],e[23])}function V(){return e[12](e[23])}return{key:i,first:null,c(){l=I("div"),g&&g.c(),a=S(),t=I("img"),w=S(),this.h()},l(p){l=T(p,"DIV",{class:!0});var v=A(l);g&&g.l(v),a=Z(v),t=T(v,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),w=Z(v),v.forEach(y),this.h()},h(){h(t,"class",u="carousel-image "+(e[1][e[23]]?"hidden":"")+" svelte-gp961v"),G(t.src,r=e[21])||h(t,"src",r),h(t,"alt",o="Image "+e[23]),h(t,"loading","lazy"),h(l,"class","image-wrapper svelte-gp961v"),this.first=l},m(p,v){D(p,l,v),g&&g.m(l,null),C(l,a),C(l,t),C(l,w),f||(m=[z(t,"load",b),z(t,"click",M),z(t,"error",V)],f=!0)},p(p,v){e=p,e[1][e[23]]?g||(g=R(),g.c(),g.m(l,a)):g&&(g.d(1),g=null),v&3&&u!==(u="carousel-image "+(e[1][e[23]]?"hidden":"")+" svelte-gp961v")&&h(t,"class",u),v&1&&!G(t.src,r=e[21])&&h(t,"src",r),v&1&&o!==(o="Image "+e[23])&&h(t,"alt",o)},d(p){p&&y(l),g&&g.d(),f=!1,J(m)}}}function te(i){let e,l,a,t;function u(){return i[14](i[23])}return{c(){e=I("img"),this.h()},l(r){e=T(r,"IMG",{class:!0,src:!0,alt:!0,loading:!0}),this.h()},h(){h(e,"class","thumbnail-image svelte-gp961v"),G(e.src,l=i[21])||h(e,"src",l),h(e,"alt","Thumbnail "+i[23]),h(e,"loading","lazy")},m(r,o){D(r,e,o),a||(t=z(e,"load",u),a=!0)},p(r,o){i=r,o&1&&!G(e.src,l=i[21])&&h(e,"src",l)},d(r){r&&y(e),a=!1,t()}}}function ae(i){let e,l='<div role="status" class="image-placeholder svelte-gp961v"><div class="flex items-center justify-center w-full h-full bg-gray-300 rounded dark:bg-gray-700"><svg class="w-10 h-10 text-gray-200 dark:text-gray-600" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18"><path d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"></path></svg></div></div>';return{c(){e=I("div"),e.innerHTML=l,this.h()},l(a){e=T(a,"DIV",{role:!0,class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1xuodw5"&&(e.innerHTML=l),this.h()},h(){h(e,"role","status"),h(e,"class","thumbnail-placeholder svelte-gp961v")},m(a,t){D(a,e,t)},p:N,d(a){a&&y(e)}}}function W(i){let e,l,a,t;function u(f,m){return f[1][f[23]]?ae:te}let r=u(i),o=r(i);function w(){return i[15](i[23])}return{c(){e=I("button"),o.c(),l=S(),this.h()},l(f){e=T(f,"BUTTON",{type:!0,class:!0});var m=A(e);o.l(m),l=Z(m),m.forEach(y),this.h()},h(){h(e,"type","button"),h(e,"class","thumbnail-button svelte-gp961v")},m(f,m){D(f,e,m),o.m(e,null),C(e,l),a||(t=z(e,"click",w),a=!0)},p(f,m){i=f,r===(r=u(i))&&o?o.p(i,m):(o.d(1),o=r(i),o&&(o.c(),o.m(e,l)))},d(f){f&&y(e),o.d(),a=!1,t()}}}function se(i){let e,l,a='<i class="fa-solid fa-arrow-left arrow-icon svelte-gp961v"></i>',t,u,r=[],o=new Map,w,f,m='<i class="fa-solid fa-arrow-right arrow-icon svelte-gp961v"></i>',g,b,M,V,p=B(i[0]);const v=s=>s[21];for(let s=0;s<p.length;s+=1){let d=q(i,p,s),c=v(d);o.set(c,r[s]=F(c,d))}let L=B(i[0]),_=[];for(let s=0;s<L.length;s+=1)_[s]=W(U(i,L,s));return{c(){e=I("div"),l=I("button"),l.innerHTML=a,t=S(),u=I("div");for(let s=0;s<r.length;s+=1)r[s].c();w=S(),f=I("button"),f.innerHTML=m,g=S(),b=I("div");for(let s=0;s<_.length;s+=1)_[s].c();this.h()},l(s){e=T(s,"DIV",{class:!0});var d=A(e);l=T(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(l)!=="svelte-1sft7rd"&&(l.innerHTML=a),t=Z(d),u=T(d,"DIV",{class:!0});var c=A(u);for(let H=0;H<r.length;H+=1)r[H].l(c);c.forEach(y),w=Z(d),f=T(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(f)!=="svelte-fw07o"&&(f.innerHTML=m),d.forEach(y),g=Z(s),b=T(s,"DIV",{class:!0});var E=A(b);for(let H=0;H<_.length;H+=1)_[H].l(E);E.forEach(y),this.h()},h(){h(l,"type","button"),h(l,"class","carousel-button left svelte-gp961v"),h(u,"class","carousel-container svelte-gp961v"),h(f,"type","button"),h(f,"class","carousel-button right svelte-gp961v"),h(e,"class","carousel svelte-gp961v"),h(b,"class","thumbnails svelte-gp961v")},m(s,d){D(s,e,d),C(e,l),C(e,t),C(e,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(u,null);i[13](u),C(e,w),C(e,f),D(s,g,d),D(s,b,d);for(let c=0;c<_.length;c+=1)_[c]&&_[c].m(b,null);M||(V=[z(l,"click",i[3]),z(f,"click",i[4])],M=!0)},p(s,[d]){if(d&451&&(p=B(s[0]),r=Y(r,d,v,1,s,p,o,u,x,F,null,q)),d&163){L=B(s[0]);let c;for(c=0;c<L.length;c+=1){const E=U(s,L,c);_[c]?_[c].p(E,d):(_[c]=W(E),_[c].c(),_[c].m(b,null))}for(;c<_.length;c+=1)_[c].d(1);_.length=L.length}},i:N,o:N,d(s){s&&(y(e),y(g),y(b));for(let d=0;d<r.length;d+=1)r[d].d();i[13](null),P(_,s),M=!1,J(V)}}}function re(i,e,l){let{slug:a}=e,t=[],u=t.map(()=>!0),r,o=0;console.log("Slug:",a),Q(async()=>{await w(),p()});async function w(){try{const n=await fetch(`/api/getGallery?slug=${a}`);if(n.ok){const k=await n.json();l(0,t=k.images),l(1,u=t.map(()=>!1)),console.log("Loaded images:",t)}else console.error("Ошибка при получении данных галереи:",n)}catch(n){console.error("Ошибка загрузки галереи:",n)}}function f(){o=(o-1+t.length)%t.length,M(o)}function m(){o=(o+1)%t.length,M(o)}function g(n){o=n,M(o)}function b(n,k){console.log("Opening full-size image with URL:",n,"and index:",k),le.open("imageView",{imageUrl:n,images:t,currentIndex:k})}function M(n){const k=r.clientWidth*n;r.scroll(k,0)}function V(n){l(1,u[n]=!1,u)}function p(){l(1,u=t.map(()=>!0)),t.forEach((n,k)=>v(n,k))}function v(n,k){const O=new Image;O.src=n,O.onload=()=>{l(1,u[k]=!1,u)},O.onerror=()=>{L(k)}}function L(n){l(1,u[n]=!1,u)}const _=n=>V(n),s=(n,k)=>b(n,k),d=n=>L(n);function c(n){X[n?"unshift":"push"](()=>{r=n,l(2,r)})}const E=n=>V(n),H=n=>g(n);return i.$$set=n=>{"slug"in n&&l(9,a=n.slug)},[t,u,r,f,m,g,b,V,L,a,_,s,d,c,E,H]}class ue extends ${constructor(e){super(),ee(this,e,re,se,K,{slug:9})}}export{ue as C};
